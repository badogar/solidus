<% content_for :head do %>
  <%= javascript_include_tag 'jquery-1.3.2.min' %>
  <%= javascript_include_tag 'checkout' %>     
  <%= javascript_tag "var AUTH_TOKEN = #{form_authenticity_token.inspect};" if protect_against_forgery? %>
<% end %>                 

<% if(params[:checkout_presenter]) -%>
<input type="hidden" name="submit_sstate" value="<%= params[:checkout_presenter][:ship_address_state_id] %>" />
<input type="hidden" name="submit_bstate" value="<%= params[:checkout_presenter][:bill_address_state_id] %>" />
<input type="hidden" name="submit_scountry" value="<%= params[:checkout_presenter][:ship_address_country_id] %>" />
<input type="hidden" name="submit_bcountry" value="<%= params[:checkout_presenter][:bill_address_country_id] %>" />
<% end -%>

<%= error_messages_for :checkout_presenter %>
<div id="billing">
  <h2><%= t("billing_address")%></h2>  
  <table>
    <tr>
      <td width="150"><%= t("first_name") %></td>
      <td><%= f.text_field :bill_address_firstname %></td>
    </tr>
    <tr>
      <td><%= t("last_name") %></td>
      <td><%= f.text_field :bill_address_lastname %></td>
    </tr>
    <tr>
      <td><%= t("street_address") %></td>
      <td><%= f.text_field :bill_address_address1 %></td>
    </tr>
    <tr>
      <td><%= t("street_address_2") %></td>
      <td><%= f.text_field :bill_address_address2 %></td>
    </tr>
    <tr>
      <td><%= t("city") %></td>
      <td><%= f.text_field :bill_address_city %></td>
    </tr>                        
    <tr>
      <td><%= t("state") %></td>    
      <td id="bstate">
    		<%= collection_select("checkout_presenter", 
    		                      :bill_address_state_id, 
    		                      @states, 
    		                      :id, 
    		                      :name, 
    		                      {:include_blank => true}, 
    		                      {:style=> 'width:150px;'}) %>
      </td>
    </tr>  
    <tr>
      <td><%= t("zip") %></td>
      <td><%= f.text_field :bill_address_zipcode %></td>
    </tr>    
    <tr>
      <td><%= t("country") %></td>
      <td id="bcountry">
  			<%= f.collection_select :bill_address_country_id, @countries, :id, :name, {}, {:style => 'width:150px;'} %>
  		</td>
  	</tr>
    <tr>
      <td><%= t("phone") %></td>
      <td><%= f.text_field :bill_address_phone %></td>
    </tr>
  </table> 
</div>
<input id="same_address" type="checkbox"><%= t("use_as_shipping_address") %></input>   
<div id = "shipping">
  <h2><%= t("shipping_address")%></h2>
  <table>
    <tr>
      <td width="150"><%= t("first_name") %></td>
      <td><%= f.text_field :ship_address_firstname %></td>
    </tr>
    <tr>
      <td><%= t("last_name") %></td>
      <td><%= f.text_field :ship_address_lastname %></td>
    </tr>
    <tr>
      <td><%= t("street_address") %></td>
      <td><%= f.text_field :ship_address_address1 %></td>
    </tr>
    <tr>
      <td><%= t("street_address_2") %></td>
      <td><%= f.text_field :ship_address_address2 %></td>
    </tr>
    <tr>
      <td><%= t("city") %></td>
      <td><%= f.text_field :ship_address_city %></td>
    </tr>    
    <tr>
      <td><%= t("state") %></td>    
      <td id="sstate">
    		<%= collection_select("checkout_presenter", 
    		                      :ship_address_state_id, 
    		                      @states, 
    		                      :id, 
    		                      :name, 
    		                      {:include_blank => true}, 
    		                      {:style=> 'width:150px;'}) %>
      </td>
    </tr>  
    <tr>
      <td><%= t("zip") %></td>
      <td><%= f.text_field :ship_address_zipcode %></td>
    </tr>
    <tr>
      <td><%= t("country") %></td>
      <td id="scountry">
  			<%= f.collection_select :ship_address_country_id, @countries, :id, :name, {}, {:style => 'width:150px;'} %>
  		</td>
  	</tr>
    <tr>
      <td><%= t("phone") %></td>
      <td><%= f.text_field :ship_address_phone %></td>
    </tr>
  </table> 
</div>
<h2><%= t("payment_information") %></h2>
<table class="creditcard">
  <tr>
    <td colspan="2">
      <%= image_tag "creditcard.gif", :id => 'creditcard-image' %>
    </td>
  </tr>
  <tr>
    <!-- use this sample (visa) cc# for testing 4111111111111111 -->
    <td width="120"><%= t("card_number") %></td>
    <td><%= f.text_field :creditcard_number, :size=> 19 -%></td>
  </tr>
  <tr>
    <td><%= t("expiration_month") %></td>
    <td><%= select_month(@date, :prefix => 'checkout_presenter', :field_name => 'creditcard_month', :use_month_numbers => true) -%>
  </tr>
  <tr>
    <td><%= t("expiration_year") %></td>
    <td><%= select_year(@date, :prefix => 'checkout_presenter', :field_name => 'creditcard_year', :start_year => Date.today.year, :end_year => Date.today.year + 15) -%></td>
  </tr>
  <tr>
    <td><%= t("card_code") %></td>
    <td>
      <%= f.text_field :creditcard_verification_value, {:style => "width:40px"} -%>
      <a href="" onclick="window.open('/checkouts/cvv','mywin','left=20,top=20,width=500,height=500,toolbar=0,resizable=0,scrollbars=1');return false">
	(<%= t("whats_this") %>)
      </a>
    </td>
  </tr>
</table>
